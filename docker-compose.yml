version: "3.8"

services:
  costlens:
    build: .
    container_name: aws-costlens
    volumes:
      # Mount AWS credentials (read-only)
      - ~/.aws:/root/.aws:ro
      # Mount output directory for reports
      - ./output:/app/output
    environment:
      # Optional: specify default profile
      - AWS_PROFILE=${AWS_PROFILE:-default}
      # Optional: specify default region
      - AWS_DEFAULT_REGION=${AWS_DEFAULT_REGION:-us-east-1}
    working_dir: /app/output
    # Override command as needed:
    # docker compose run costlens cost --profiles prod
    # docker compose run costlens trend --all
    # docker compose run costlens audit --profiles dev
    # docker compose run costlens report --all --report-type pdf csv
